# Change Log: LandingPageMigration
**Date**: 2025-01-XX HH:mm
**Task**: è¿ç§»è½åœ°é¡µç®¡ç†æ¨¡å—ä» legacy_server.js åˆ°æ–°çš„ Prisma æ¶æ„

## ğŸ“‚ File Changes

### 1. Modified Files
- `src/server.ts`:
    - æ·»åŠ äº† `import landingRoutes from './routes/landingRoutes'` å¯¼å…¥è¯­å¥
    - åœ¨è·¯ç”±æ³¨å†Œéƒ¨åˆ†æ·»åŠ äº† `app.use('/api/landing', landingRoutes)` æˆ–ç±»ä¼¼çš„è·¯ç”±æ³¨å†Œ
    - ç¡®ä¿è½åœ°é¡µç®¡ç†ç›¸å…³çš„ API è·¯ç”±å·²æ­£ç¡®æ³¨å†Œ

### 2. Created Files
- `src/controllers/landingController.ts`: åˆ›å»ºè½åœ°é¡µç®¡ç†æ§åˆ¶å™¨
    - å®ç°äº†åœ°å—ï¼ˆPlotsï¼‰çš„ CRUD æ“ä½œ
    - å®ç°äº†å…¨å±€è®¾ç½®ï¼ˆSettingsï¼‰çš„ç®¡ç†åŠŸèƒ½
    - å®ç°äº† CTA èƒŒæ™¯å›¾è®¾ç½®æ¥å£
    - å®ç°äº†é¡µè„šï¼ˆFooterï¼‰ä¿¡æ¯ç®¡ç†æ¥å£
    - å¯èƒ½åŒ…å«å¤©æ°”æ¨¡æ¿ç›¸å…³çš„ç®¡ç†åŠŸèƒ½
    - ä½¿ç”¨ Prisma Client æ›¿ä»£ Mongoose è¿›è¡Œæ•°æ®åº“æ“ä½œ

- `src/routes/landingRoutes.ts`: åˆ›å»ºè½åœ°é¡µç®¡ç†è·¯ç”±
    - å®šä¹‰äº†æ‰€æœ‰è½åœ°é¡µç®¡ç†ç›¸å…³çš„ API è·¯ç”±
    - æ·»åŠ äº† `requireLogin` è®¤è¯ä¸­é—´ä»¶ä¿æŠ¤æ‰€æœ‰è·¯ç”±
    - è·¯ç”±å¯èƒ½åŒ…æ‹¬ï¼š
        - `GET /api/landing/plots` - è·å–åœ°å—åˆ—è¡¨
        - `POST /api/landing/plots` - åˆ›å»ºåœ°å—
        - `PUT /api/landing/plots/:id` - æ›´æ–°åœ°å—
        - `DELETE /api/landing/plots/:id` - åˆ é™¤åœ°å—
        - `GET /api/landing/settings` - è·å–è®¾ç½®
        - `POST /api/landing/settings` - æ›´æ–°è®¾ç½®
        - `GET /api/landing/settings/footer` - è·å–é¡µè„šè®¾ç½®
        - `POST /api/landing/settings/footer` - æ›´æ–°é¡µè„šè®¾ç½®
        - `GET /api/landing/settings/cta-background` - è·å– CTA èƒŒæ™¯
        - `POST /api/landing/settings/cta-background` - æ›´æ–° CTA èƒŒæ™¯

## ğŸ’¡ Key Logic / Notes
- **æ•°æ®æ¨¡å‹è¿ç§»**: ä» MongoDB (Mongoose) è¿ç§»åˆ° PostgreSQL (Prisma)
    - `Plot` æ¨¡å‹ï¼šåœ°å—ä¿¡æ¯ï¼ŒåŒ…å«è½®æ’­å›¾å’Œæ ¸å¿ƒä¿¡æ¯åˆ—è¡¨
    - `Setting` æ¨¡å‹ï¼šé”®å€¼åŒ–é…ç½®ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹å’Œåˆ†ç±»
    - ä½¿ç”¨ Prisma çš„ JSONB ç±»å‹å­˜å‚¨å¤æ‚æ•°æ®ç»“æ„ï¼ˆå¦‚ `carousel_images`, `info_list`ï¼‰

- **å…³è”å…³ç³»å¤„ç†**: 
    - ç¡®ä¿åœ°å—ä¸ç”Ÿé•¿æ—¥å¿—ã€æœˆåº¦æ€»ç»“çš„å…³è”å…³ç³»æ­£ç¡®è¿ç§»
    - è®¾ç½®è¡¨ä½¿ç”¨é”®å€¼å¯¹æ¨¡å¼ï¼Œé€šè¿‡ `key` å­—æ®µå”¯ä¸€æ ‡è¯†

- **API å…¼å®¹æ€§**: 
    - ä¿æŒä¸å‰ç«¯è°ƒç”¨çš„ API è·¯å¾„ä¸€è‡´
    - ç¡®ä¿å“åº”æ ¼å¼ä¸æ—§ç³»ç»Ÿå…¼å®¹
    - å¤„ç†æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„é€»è¾‘ï¼ˆå¦‚æœæœ‰ï¼‰

- **è®¤è¯ä¿æŠ¤**: 
    - æ‰€æœ‰è½åœ°é¡µç®¡ç†æ¥å£éƒ½éœ€è¦ç™»å½•è®¤è¯
    - ä½¿ç”¨ `requireLogin` ä¸­é—´ä»¶ç»Ÿä¸€ä¿æŠ¤

- **æ³¨æ„äº‹é¡¹**:
    - æ£€æŸ¥ JSONB å­—æ®µçš„æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
    - ç¡®ä¿æšä¸¾ç±»å‹ï¼ˆå¦‚ `SettingCategory`, `SettingDataType`ï¼‰æ­£ç¡®æ˜ å°„
    - éªŒè¯æ–‡ä»¶ä¸Šä¼ è·¯å¾„å’Œå­˜å‚¨é€»è¾‘

