# 变更日志: 修复CORS跨域401错误
**日期**: 2025-01-27
**任务**: 修复客户端（http://localhost:3001）访问 API 时返回 401 错误的 CORS 配置问题

## 📂 文件变更
### 修改 (Modified)
- `src/server.ts`: 修改了 CORS 配置，添加 `http://localhost:3001` 到 origin 白名单，并设置 `credentials: true` 以支持 cookie/session 传递

## 💡 技术说明 (Technical Notes)
- **问题原因**: 之前的 CORS 配置使用默认设置 `cors()`，虽然允许所有来源，但未明确配置 `credentials: true`，导致跨域请求时无法携带 cookie/session，从而触发 401 未授权错误
- **修复方案**:
  1. 将 `origin` 设置为白名单数组：`['http://localhost:3000', 'http://localhost:3001']`
  2. 设置 `credentials: true` 以允许跨域请求携带认证信息（cookie、session）
- **影响范围**: 
  - 允许 `http://localhost:3000`（后端自身）和 `http://localhost:3001`（客户端）访问 API
  - 跨域请求现在可以正确携带 session cookie，避免 401 错误
- **后续需求**: `credentials: true` 配置为后续的认证功能做好了准备

