# å˜æ›´æ—¥å¿—: æ¨¡æ¿ä¸­å¿ƒæ•°æ®è¿ç§»è„šæœ¬
**æ—¥æœŸ**: 2025-11-26 00:10
**ä»»åŠ¡**: ä¸ºæ¨¡æ¿ä¸­å¿ƒä»æ—§ MongoDB å‘æ–° PostgreSQL/Prisma æ¶æ„ç¼–å†™æ•°æ®è¿ç§»è„šæœ¬

## ğŸ“‚ æ–‡ä»¶å˜æ›´
### ä¿®æ”¹ (Modified)
- æ— ã€‚

### æ–°å¢ (Created)
- `scripts/migrate-templates.ts`: å®ç°ä»æ—§ MongoDBï¼ˆé€šè¿‡ `OLD_MONGO_URL` è¿æ¥ï¼‰è¯»å–æ¨¡æ¿ä¸­å¿ƒç›¸å…³é›†åˆæ•°æ®ï¼Œå¹¶å†™å…¥ Prisma ç®¡ç†çš„ PostgreSQLï¼š
  - è¿ç§»é›†åˆï¼š`production_step_templates`ã€`title_templates`ã€`appreciation_templates`ã€`weather_templates`ã€`personnel`ã€`grades`ã€`adoption_plans`ã€‚
  - ä½¿ç”¨ `prisma.*.upsert` ä¿è¯è„šæœ¬å¯é‡å¤æ‰§è¡Œï¼ŒæŒ‰ä¸šåŠ¡ä¸»é”®ï¼ˆå¦‚ `step_name`ã€`category_name`ã€`name`ã€`type` ç­‰ï¼‰è¿›è¡Œå¹‚ç­‰å†™å…¥ã€‚
- `docs/changelogs/0006_æ¨¡æ¿ä¸­å¿ƒæ•°æ®è¿ç§»è„šæœ¬.md`: è®°å½•æœ¬æ¬¡æ•°æ®è¿ç§»è„šæœ¬çš„è®¾è®¡ä¸æ¶‰åŠçš„é›†åˆ/æ¨¡å‹ã€‚

### åˆ é™¤ (Deleted)
- æ— ã€‚

## ğŸ’¡ æŠ€æœ¯è¯´æ˜ (Technical Notes)
- æ—§ MongoDB çš„æ¨¡æ¿æ•°æ®æ¥æºäº `src/models` ä¸­çš„ Mongoose æ¨¡å‹ï¼Œå¯¹åº”é›†åˆåç§°åˆ†åˆ«ä¸ºï¼š
  - `ProductionStepTemplate` â†’ `production_step_templates`
  - `TitleTemplate` â†’ `title_templates`
  - `AppreciationTemplate` â†’ `appreciation_templates`
  - `WeatherTemplate` â†’ `weather_templates`
  - `Personnel` â†’ `personnel`
  - `Grade` â†’ `grades`
  - `AdoptionPlan` â†’ `adoption_plans`
- è¿ç§»è„šæœ¬ä¸­æ²¡æœ‰ç›´æ¥å¤ç”¨æ—§çš„ `_id` ä½œä¸ºæ–°åº“ä¸»é”®ï¼Œè€Œæ˜¯ä¾æ®å„è‡ªçš„ä¸šåŠ¡å”¯ä¸€é”®ï¼ˆå¦‚æ­¥éª¤åã€å“ç±»åã€ç­‰çº§åã€æ–¹æ¡ˆç±»å‹ç­‰ï¼‰è¿›è¡Œ upsertï¼Œä»¥ä¸å½“å‰ Prisma schemaï¼ˆUUID ä¸»é”®ï¼‰ä¿æŒå…¼å®¹ã€‚
- é¢†å…»æ–¹æ¡ˆä¸äººå‘˜è§’è‰²ç­‰å­—æ®µåœ¨è¿ç§»æ—¶åšäº†å¿…è¦çš„æšä¸¾æ˜ å°„ï¼ˆå¦‚ `private/enterprise/b2b` â†’ `AdoptionPlanType.PRIVATE/ENTERPRISE/B2B`ï¼Œä»¥åŠä¸­æ–‡è§’è‰² â†’ `PersonnelRole` æšä¸¾ï¼‰ï¼Œç¡®ä¿ä¸æ–°ä»£ç é€»è¾‘ä¸€è‡´ã€‚


