# 变更日志: 采摘记录前后端修复
**日期**: 2025-11-27 00:00
**任务**: 修复采摘记录迁移字段与前端按钮绑定

## 📂 文件变更
### 修改 (Modified)
- `views/traceability-management.html`: 加入采摘记录字段归一化逻辑并确保编辑/删除按钮使用正确 ID 与日期、重量回显。
- `scripts/migrate-data.ts`: 采摘记录迁移新增更多日期、重量字段映射以保证 `harvestDate` 与重量写入。

### 新增 (Created)
- `docs/changelogs/0039_采摘记录前后端修复.md`: 记录本次前后端双修复。

### 删除 (Deleted)
- 无

## 💡 技术说明 (Technical Notes)
- 前端在加载数据时统一生成 `_id`、`harvest_date`、`fresh_leaf_weight_kg`，兼容 Prisma 与老 Mongo 结构。
- 迁移脚本在清理数据后会兼容多种字段命名，避免再出现 Invalid Date / undefined kg。

